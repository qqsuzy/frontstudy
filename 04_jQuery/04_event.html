<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>
<body>
  
  <script>
    /*
    1. on()
      1) 하나의 이벤트 타입에 여러 개의 이벤트 리스너를 등록할 수 있다. (표준 이벤트 모델의 특징)
      2) 정적 요소
        이벤트.대상.on(이벤트타입, 이벤트리스너)
      3) 동적 요소 (정적 요소도 가능)
        부모요소.on(이벤트타입, 이벤트대상, 이벤트리스너)

        동적 이벤트 : 문서가 로드된 후 생성되거나 특정 이벤트로 추가된 요소에 대해 이벤트를 처리하는 방식이다.

      4)
        btn.on('click', function(){})
        btn.click(function(){})       -- on 생략도 가능하다.

    2. off()
      1) 등록된 이벤트를 제거한다.
      2) 형식
        이벤트대상.off(이벤트타입)

    3. one()
      1) 한번만 동작하는 이벤트
      2) 형식
        이벤트대상.one(이벤트타입, 이벤트리스너)

    4. trigger()
      1) 강제로 이벤트를 발생시킨다.  (새로 이벤트를 만드는게 아니고 기존 이벤트를 발생시킨다.)
      2) 형식
        이벤트대상.trigger(이벤트타입)      

    */
  </script>

  <div>
    <button type="button" id="btn1">버튼1</button>
  </div>
  <script>
    $('#btn1').on('click', function(evt){ // evt : 이벤트객체가 매개변수로 사용가능하다.
      alert($('evt.target').text());      // evt.target을 jQuery 객체로 바꾸어서(jQuery wrapper) text() 메소드로 호출한다.
      alert(evt.target.textContent);      // JavaScript 
      alert(this.textContent);
      alert($(this).text());

      /*
        JavaScript          jQuery
        객체.textContent    $(객체).text()

        -> javaScript 객체로 jQuery 메소드를 사용하면 (javaScript 객체).(jQuery 메소드) is not a function 오류 메시지가 뜬다.
      */
     /*
        이벤트 대상
        1. evt.target
        2. this (화살표 함수에서는 this 사용이 불가능하다.)
     */
    })
  </script>

  <div>
    <ul>
      <li class="menu">김치찌개</li>
      <li class="menu">순두부찌개</li>
      <li class="menu">된장찌개</li>
    </ul>
  </div>
  <script>
    // JavaScript는 반복문으로 배열의 이벤트 처리를 수행한다.
    var menu = document.getElementsByClassName('menu')
    for(var i = 0; i < menu.length; i++) {
      menu[i].addEventListener('click', function() {
        alert(evt.target.textContent);
      })
    }

    // jQuery는 반복문 없이 배열의 이벤트 처리를 수행할 수 있다.
    $('.menu').on('click', function(evt) {
      alert(evt.target.textContent);
    })
  </script>
  <hr>

  <div>
    <button type="button" id="btn2">버튼2</button>
    <div></div>
  </div>
  
  <script>
    var menu = [
      {
        name: '김치찌개',
        price: 10000
      },
      {
        name: '순두부찌개',
        price: 15000
      },
      {
        name: '된장찌개',
        price: 20000
      }
    ]
    var btn2 = $('#btn2');
    var div = btn2.next(); // btn2의 인접 형제인 div
    btn2.on('click', function(evt){
      for(var i = 0; i < menu.length; i++){
        var str = '<div>';
            str += '<span>' + menu[i].name +'</span>';
            str += '<span>' + menu[i].price + '</span>'
            str += '<button class="btn-alert" type = "button">확인</button>'; // 동적 요소
            str += '</div>';
            div.append(str);
      }
    });
    // 라이브 이벤트 형식
    // 특정 이벤트로 추가된 요소들은 일반 on() 메소드로 이벤트를 걸어줄 수 없다. 
    // 동적 요소 처리 방법으로 이벤트를 처리해준다.
    $(document).on('click', '.btn-alert', function(evt){   // DOM객체의 최상이 요소인 document를 부모객체로 지정한다.
      alert($(evt.target).prev().prev().text());
    });
    
  </script>
  <hr>

  <div>
    <button type="button" id="btn3">버튼3</button>
    <div>안녕하세요</div>
  </div>

  <script>
    var btn3 = $('#btn3');
    var div = btn3.next();
    // div 의 click 이벤트
    div.on('click', function(evt){
      alert(evt.target.textContent);
    })
    // btn3 의 click 이벤트
    btn3.on('click', function(evt){ 
      div.trigger('click'); // div의 click 이벤트를 동작시킨다.  (div를 클릭했을 때와 동일한 이벤트(alert 창)를 발생시킨다.)
    })
  </script>

</body>
</html>